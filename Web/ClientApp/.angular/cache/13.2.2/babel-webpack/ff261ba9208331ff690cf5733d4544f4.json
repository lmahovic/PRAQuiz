{"ast":null,"code":"import { timer } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service-admin\";\nimport * as i2 from \"../../services/state.service-admin\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction AdminLobbyScreenComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const player_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", player_r1.nickname, \" \");\n  }\n}\n\nconst adminRefreshCounterTime = 10;\nexport let AdminLobbyScreenComponent = /*#__PURE__*/(() => {\n  class AdminLobbyScreenComponent {\n    constructor(apiService, stateService, router) {\n      this.apiService = apiService;\n      this.stateService = stateService;\n      this.router = router;\n      this.refreshCounter = adminRefreshCounterTime;\n    }\n\n    ngOnInit() {\n      this.startAutoPlayerRefresh();\n      this.startRefreshTimeIndicator();\n    }\n\n    startRefreshTimeIndicator() {\n      this.refreshIndicatorSub = timer(1000, 1000).subscribe(() => {\n        if (this.refreshCounter === 1) {\n          this.refreshCounter = adminRefreshCounterTime;\n        } else {\n          this.refreshCounter--;\n        }\n      });\n    }\n\n    startAutoPlayerRefresh() {\n      this.refreshSub = timer(0, 10000).subscribe(() => {\n        this.refreshPlayers();\n      });\n    }\n\n    refreshPlayers() {\n      this.apiService.getPlayers(this.stateService.game.id).subscribe(response => {\n        this.stateService.players = response;\n        console.log(this.stateService.players);\n        this.stateService.noPlayers = response.length;\n      });\n    }\n\n    openAbortConfirmationDialog() {\n      this.router.navigate([\"admin/abort-confirmation\"]);\n    }\n\n    manualRefresh() {\n      var _a, _b;\n\n      this.refreshCounter = adminRefreshCounterTime;\n      (_a = this.refreshSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n      (_b = this.refreshIndicatorSub) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n      this.startAutoPlayerRefresh();\n      this.startRefreshTimeIndicator();\n    }\n\n    startQuiz() {\n      var _a, _b;\n\n      this.apiService.putGameStart(this.stateService.game.id).subscribe();\n      (_a = this.refreshSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n      (_b = this.refreshIndicatorSub) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n      this.apiService.getQuestions(this.stateService.selectedQuiz).subscribe(response => {\n        this.stateService.saveQuestionsAnswersState(response);\n        console.log(this.stateService.getQuestionsAnswersState());\n        this.processNextQuestionPost();\n      });\n    }\n\n    processNextQuestionPost() {\n      this.stateService.postNextPlayerQuestionAnswers().subscribe(response => {\n        this.stateService.playerQuestionAnswersByQuestion[this.stateService.getCurrentQuestionNumber()] = response;\n        console.log(this.stateService.playerQuestionAnswersByQuestion);\n        this.router.navigate([\"admin/next-question\"]);\n      });\n    }\n\n  }\n\n  AdminLobbyScreenComponent.ɵfac = function AdminLobbyScreenComponent_Factory(t) {\n    return new (t || AdminLobbyScreenComponent)(i0.ɵɵdirectiveInject(i1.ApiServiceAdmin), i0.ɵɵdirectiveInject(i2.StateServiceAdmin), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  AdminLobbyScreenComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminLobbyScreenComponent,\n    selectors: [[\"app-admin-lobby-screen\"]],\n    decls: 28,\n    vars: 6,\n    consts: [[1, \"main-container\"], [1, \"game-pin-bar\"], [1, \"game-pin-area\"], [1, \"fs-2\"], [1, \"content-area\"], [1, \"command-panel\"], [1, \"player-number-indicator\", \"btn\", \"btn-secondary\", \"btn-lg\", \"no-hover\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"26\", \"height\", \"26\", \"fill\", \"white\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-person-fill\"], [\"d\", \"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"], [1, \"logo\", \"d-lg-block\"], [1, \"display-3\"], [1, \"refresh-indicator\"], [1, \"mb-1\"], [1, \"fs-3\", \"fw-bold\"], [1, \"nickname-area\"], [1, \"nickname-box\"], [\"class\", \"player-name-box btn btn-secondary btn-lg no-hover\", 4, \"ngFor\", \"ngForOf\"], [1, \"player-name-box\", \"btn\", \"btn-secondary\", \"btn-lg\", \"no-hover\"]],\n    template: function AdminLobbyScreenComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(8, \"svg\", 7);\n        i0.ɵɵelement(9, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(11, \"a\", 9);\n        i0.ɵɵlistener(\"click\", function AdminLobbyScreenComponent_Template_a_click_11_listener() {\n          return ctx.openAbortConfirmationDialog();\n        });\n        i0.ɵɵtext(12, \"Abort\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelementStart(14, \"p\", 11);\n        i0.ɵɵtext(15, \" PRA QUIZ \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"a\", 9);\n        i0.ɵɵlistener(\"click\", function AdminLobbyScreenComponent_Template_a_click_16_listener() {\n          return ctx.manualRefresh();\n        });\n        i0.ɵɵtext(17, \"Refresh\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"a\", 9);\n        i0.ɵɵlistener(\"click\", function AdminLobbyScreenComponent_Template_a_click_18_listener() {\n          return ctx.startQuiz();\n        });\n        i0.ɵɵtext(19, \"Start\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 12);\n        i0.ɵɵelementStart(21, \"p\", 13);\n        i0.ɵɵtext(22, \"Refreshing automatically in:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"p\", 14);\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 15);\n        i0.ɵɵelementStart(26, \"div\", 16);\n        i0.ɵɵtemplate(27, AdminLobbyScreenComponent_div_27_Template, 2, 1, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"Game PIN: \", ctx.stateService.game.gamePin, \"\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\" \", ctx.stateService.noPlayers, \" \");\n        i0.ɵɵadvance(8);\n        i0.ɵɵclassProp(\"disabled\", ctx.stateService.noPlayers === 0);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"\", ctx.refreshCounter, \"..\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.stateService.players);\n      }\n    },\n    directives: [i4.NgForOf],\n    styles: [\".main-container[_ngcontent-%COMP%]{height:100vh;width:100vw;align-self:flex-start;display:flex;flex-flow:column;flex-wrap:wrap}.game-pin-bar[_ngcontent-%COMP%]{background-color:gray;height:10rem;display:flex;justify-content:center;align-items:center;padding:1rem;margin-bottom:1rem}.game-pin-area[_ngcontent-%COMP%]{background-color:#fff;width:60%;height:100%;display:flex;justify-content:center;align-items:center;font-weight:700}.content-area[_ngcontent-%COMP%]{flex-grow:1}.command-panel[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-around;margin-bottom:2rem}.player-number-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;gap:.5rem}.logo[_ngcontent-%COMP%]{background-color:#f0f8ff;padding:1.5rem;display:none}.btn.no-hover[_ngcontent-%COMP%]:hover{cursor:default!important;color:#fff;background-color:#6c757d;border-color:#6c757d}.nickname-area[_ngcontent-%COMP%]{display:flex;height:75%;align-items:center;justify-content:center;flex-wrap:wrap}.nickname-box[_ngcontent-%COMP%]{padding:3rem;display:flex;flex-wrap:wrap;row-gap:32px;column-gap:24px;justify-content:center}.refresh-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-flow:column;position:absolute;top:16rem;right:3rem}\"]\n  });\n  return AdminLobbyScreenComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}